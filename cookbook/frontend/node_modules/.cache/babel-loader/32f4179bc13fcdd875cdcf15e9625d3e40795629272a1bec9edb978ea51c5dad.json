{"ast":null,"code":"import React,{useEffect,useState}from'react';import RecipeForm from'../components/RecipeForm';import{getRecipes,addRecipe,updateRecipe,deleteRecipe}from'../services/api';import\"../styles.css\";import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const HomePage=()=>{var _location$state;const[recipes,setRecipes]=useState([]);const[editingRecipe,setEditingRecipe]=useState(null);const[alertMessage,setAlertMessage]=useState('');const[alertType,setAlertType]=useState('');// 'success' or 'danger'\nconst[showAlert,setShowAlert]=useState(false);const[isEditingMode,setIsEditingMode]=useState(false);// Flag for editing mode\nconst location=useLocation();const navigate=useNavigate();const isEditing=Boolean((_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.recipe);// Set editingRecipe from navigation state or reset when the page loads\nuseEffect(()=>{if(isEditing){setEditingRecipe(location.state.recipe);setIsEditingMode(true);}else{setEditingRecipe(null);setIsEditingMode(false);}},[location.state]);const handleNavigation=path=>{if(isEditingMode){// Show confirmation before navigating away\nif(window.confirm(\"You have unsaved changes. Are you sure you want to leave?\")){setIsEditingMode(false);// Reset unsaved changes flag\nnavigate(path);// Navigate to the new path\n}}else{navigate(path);// Navigate directly\n}};const fetchRecipes=async()=>{const data=await getRecipes();setRecipes(data);};const handleAddRecipe=async newRecipe=>{setIsEditingMode(false);try{await addRecipe(newRecipe);fetchRecipes();triggerAlert('Recipe added successfully!','success');}catch(error){triggerAlert('Failed to add recipe. Please try again.','danger');}};const handleEditRecipe=async updatedRecipe=>{try{await updateRecipe(editingRecipe._id,updatedRecipe);setEditingRecipe(null);// Clear the form after updating\nfetchRecipes();triggerAlert('Recipe updated successfully!','success');}catch(error){triggerAlert('Failed to update recipe. Please try again.','danger');}};const triggerAlert=(message,type)=>{setAlertMessage(message);setAlertType(type);setShowAlert(true);// Hide alert after 3 seconds\nsetTimeout(()=>{setShowAlert(false);},3000);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{className:\"text-white py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-center\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Cookbook\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center justify-content-center mt-3\",children:/*#__PURE__*/_jsxs(\"nav\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNavigation(\"/\"),children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleNavigation(\"/recipes\"),children:\"Recipes\"})]})})]})}),showAlert&&/*#__PURE__*/_jsx(\"div\",{className:`alert alert-${alertType} text-center`,style:{position:'fixed',width:'100%',zIndex:1000,top:0},children:alertMessage}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",id:\"body\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(RecipeForm,{onSubmit:editingRecipe?handleEditRecipe:handleAddRecipe,initialData:editingRecipe,onReset:()=>{setEditingRecipe(null);setIsEditingMode(false);// No unsaved changes after reset\n},onChange:()=>setIsEditingMode(true)})})})}),/*#__PURE__*/_jsx(\"footer\",{className:\"text-white py-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 text-center\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Cookbook App \\xA9 2024 | Created by Daniel\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"https://github.com/Danypoz1986\",className:\"text-white text-decoration-none\",children:\"GitHub\"})})]})})})})]});};export default HomePage;","map":{"version":3,"names":["React","useEffect","useState","RecipeForm","getRecipes","addRecipe","updateRecipe","deleteRecipe","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HomePage","_location$state","recipes","setRecipes","editingRecipe","setEditingRecipe","alertMessage","setAlertMessage","alertType","setAlertType","showAlert","setShowAlert","isEditingMode","setIsEditingMode","location","navigate","isEditing","Boolean","state","recipe","handleNavigation","path","window","confirm","fetchRecipes","data","handleAddRecipe","newRecipe","triggerAlert","error","handleEditRecipe","updatedRecipe","_id","message","type","setTimeout","children","className","onClick","style","position","width","zIndex","top","id","onSubmit","initialData","onReset","onChange","href"],"sources":["C:/Users/danie/Documents/R0314-MERN/cookbook/frontend/src/pages/HomePage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport RecipeForm from '../components/RecipeForm';\r\nimport { getRecipes, addRecipe, updateRecipe, deleteRecipe } from '../services/api';\r\nimport \"../styles.css\";\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst HomePage = () => {\r\n  const [recipes, setRecipes] = useState([]);\r\n  const [editingRecipe, setEditingRecipe] = useState(null);\r\n  const [alertMessage, setAlertMessage] = useState('');\r\n  const [alertType, setAlertType] = useState(''); // 'success' or 'danger'\r\n  const [showAlert, setShowAlert] = useState(false);\r\n  const [isEditingMode, setIsEditingMode] = useState(false); // Flag for editing mode\r\n\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const isEditing = Boolean(location.state?.recipe);\r\n\r\n  // Set editingRecipe from navigation state or reset when the page loads\r\n  useEffect(() => {\r\n    if (isEditing) {\r\n      setEditingRecipe(location.state.recipe);\r\n      setIsEditingMode(true);\r\n    } else {\r\n      setEditingRecipe(null);\r\n      setIsEditingMode(false);\r\n    }\r\n  }, [location.state]);\r\n  \r\n\r\n  const handleNavigation = (path) => {\r\n    if (isEditingMode) {\r\n      // Show confirmation before navigating away\r\n      if (window.confirm(\"You have unsaved changes. Are you sure you want to leave?\")) {\r\n        setIsEditingMode(false); // Reset unsaved changes flag\r\n        navigate(path); // Navigate to the new path\r\n      }\r\n    } else {\r\n      navigate(path); // Navigate directly\r\n    }\r\n  };\r\n\r\n  const fetchRecipes = async () => {\r\n    const data = await getRecipes();\r\n    setRecipes(data);\r\n  };\r\n\r\n  const handleAddRecipe = async (newRecipe) => {\r\n    setIsEditingMode(false);\r\n    try {\r\n      await addRecipe(newRecipe);\r\n      fetchRecipes();\r\n      triggerAlert('Recipe added successfully!', 'success');\r\n    } catch (error) {\r\n      triggerAlert('Failed to add recipe. Please try again.', 'danger');\r\n    }\r\n  };\r\n\r\n  const handleEditRecipe = async (updatedRecipe) => {\r\n    try {\r\n      await updateRecipe(editingRecipe._id, updatedRecipe);\r\n      setEditingRecipe(null); // Clear the form after updating\r\n      fetchRecipes();\r\n      triggerAlert('Recipe updated successfully!', 'success');\r\n    } catch (error) {\r\n      triggerAlert('Failed to update recipe. Please try again.', 'danger');\r\n    }\r\n  };\r\n\r\n  const triggerAlert = (message, type) => {\r\n    setAlertMessage(message);\r\n    setAlertType(type);\r\n    setShowAlert(true);\r\n    // Hide alert after 3 seconds\r\n    setTimeout(() => {\r\n      setShowAlert(false);\r\n    }, 3000);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <header className=\"text-white py-3\">\r\n        <div className=\"container\">\r\n          <div className=\"row align-items-center justify-content-center\">\r\n            <div className=\"col-12 text-center\">\r\n              <h1>Cookbook</h1>\r\n            </div>\r\n          </div>\r\n          <div className=\"row align-items-center justify-content-center mt-3\">\r\n            <nav>\r\n            <button onClick={() => handleNavigation(\"/\")}>Home</button>\r\n            <button onClick={() => handleNavigation(\"/recipes\")}>Recipes</button>\r\n            </nav>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Alert Message */}\r\n      {showAlert && (\r\n        <div\r\n          className={`alert alert-${alertType} text-center`}\r\n          style={{\r\n            position: 'fixed',\r\n            width: '100%',\r\n            zIndex: 1000,\r\n            top: 0\r\n          }}\r\n        >\r\n          {alertMessage}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"container mt-4\" id=\"body\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-md-6\">\r\n            <RecipeForm\r\n              onSubmit={editingRecipe ? handleEditRecipe : handleAddRecipe}\r\n              initialData={editingRecipe}\r\n              onReset={() => {\r\n                setEditingRecipe(null);\r\n                setIsEditingMode(false); // No unsaved changes after reset\r\n              }}\r\n              onChange={() => setIsEditingMode(true)}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <footer className=\"text-white py-3\">\r\n        <div className=\"container\">\r\n          <div className=\"row align-items-center justify-content-center\">\r\n            <div className=\"col-12 text-center\">\r\n              <p>Cookbook App Â© 2024 | Created by Daniel</p>\r\n              <p>\r\n                <a href=\"https://github.com/Danypoz1986\" className=\"text-white text-decoration-none\">\r\n                  GitHub\r\n                </a>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </footer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}